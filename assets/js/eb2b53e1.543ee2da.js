"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4428],{4445:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>n,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"Security/limitingaccessmint","title":"Limit Access to your Mint","description":"An ecash mint works without accounts. Accounts are terrible for privacy but they allow you to do one good thing which is to rate-limit the requests of your users. As we\'ve seen, a mint\'s database can only grow if we don\'t regularly rotate keys and crop the database. This poses an attack vector in which users can spend ecash to themselves forever and slowly force the mint\'s database to grow relatively quickly. This is not nice but it can happen. There are several mitigation strategies for this.","source":"@site/docs/05-Security/limitingaccessmint.md","sourceDirName":"05-Security","slug":"/Security/limitingaccessmint","permalink":"/cashu-mint-docs/docs/Security/limitingaccessmint","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Backing Up Your Mint","permalink":"/cashu-mint-docs/docs/Backups/backingup"},"next":{"title":"Protecting Your Server","permalink":"/cashu-mint-docs/docs/Security/protectingserver"}}');var o=s(4848),r=s(8453);const a={sidebar_position:1},n="Limit Access to your Mint",c={},u=[{value:"Set Rate Limits",id:"set-rate-limits",level:2},{value:"Set Fees",id:"set-fees",level:2},{value:"Set Up Accounts",id:"set-up-accounts",level:2}];function l(e){const t={a:"a",h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"limit-access-to-your-mint",children:"Limit Access to your Mint"})}),"\n",(0,o.jsx)(t.p,{children:"An ecash mint works without accounts. Accounts are terrible for privacy but they allow you to do one good thing which is to rate-limit the requests of your users. As we've seen, a mint's database can only grow if we don't regularly rotate keys and crop the database. This poses an attack vector in which users can spend ecash to themselves forever and slowly force the mint's database to grow relatively quickly. This is not nice but it can happen. There are several mitigation strategies for this."}),"\n",(0,o.jsx)(t.h2,{id:"set-rate-limits",children:"Set Rate Limits"}),"\n",(0,o.jsx)(t.p,{children:"This is the simplest solution to make sure that your mint won't be subject to a denial of service attack. Nutshell has a very basic IP-based rate limiter built in for reason which you can activate using the configuration. The built-in rate limiter allows you to limit the number of requests that can come from an IP for requests that do not grow the database (like a check for a token state, or a mint info request) and for transactions that do grow the database separately. You can use the default values in the config for this or choose values you prefer. Note: In order to be able to rate limit access per IP address, Nutshell needs to be able to see the IP address of the requests. Some reverse proxies strip away the IP from the requests, so make sure that your reverse proxy does not hide the IP from Nutshell. You can verify this by looking at the activity logs of Nutshell and checking whether you see the public IP of the incoming requests."}),"\n",(0,o.jsxs)(t.p,{children:["An alternative rate limiter that works great is fail2ban which you can use if you run Nutshell as a systemd service or as a standalone application. See ",(0,o.jsx)(t.a,{href:"/cashu-mint-docs/docs/Security/protectingserver",children:"Protecting Your Server"}),"\nYou can configure rate limits in your .env or config.toml file."]}),"\n",(0,o.jsx)(t.h2,{id:"set-fees",children:"Set Fees"}),"\n",(0,o.jsx)(t.p,{children:"Require users to pay a small fee for every ecash transaction they make. As we know from how Bitcoin was designed, this is the only solution that works for systems with privacy."}),"\n",(0,o.jsx)(t.p,{children:"You can configure fees in your .env or config.toml file."}),"\n",(0,o.jsx)(t.h2,{id:"set-up-accounts",children:"Set Up Accounts"}),"\n",(0,o.jsxs)(t.p,{children:["Accounts are terrible for privacy but they allow you to rate limit your users. The Cashu protocol will also support accounts at some point and we have current protocol specifications ",(0,o.jsx)(t.a,{href:"https://github.com/cashubtc/nuts/blob/main/21.md",children:"NUT-21"})," and ",(0,o.jsx)(t.a,{href:"https://github.com/cashubtc/nuts/blob/main/22.md",children:"NUT-22"}),". This is a requirement many mint operators have expressed since they require to authenticate their users by law or due to other application-specific requirements. Accounts will make it very easy to rate limit requests per user and also ban users that misbehave. This is not ideal from a privacy perspective but it is something that people want, so we're going to build it soon."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>n});var i=s(6540);const o={},r=i.createContext(o);function a(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);