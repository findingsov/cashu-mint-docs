<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Security/setupauthprovider" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Set Up Auth and Auth Provider | Cashu Mint Docs Best Practices</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://findingsov.github.io/cashu-mint-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://findingsov.github.io/cashu-mint-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://findingsov.github.io/cashu-mint-docs/docs/Security/setupauthprovider"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Set Up Auth and Auth Provider | Cashu Mint Docs Best Practices"><meta data-rh="true" name="description" content="Configure Mint for Authentication"><meta data-rh="true" property="og:description" content="Configure Mint for Authentication"><link data-rh="true" rel="icon" href="/cashu-mint-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://findingsov.github.io/cashu-mint-docs/docs/Security/setupauthprovider"><link data-rh="true" rel="alternate" href="https://findingsov.github.io/cashu-mint-docs/docs/Security/setupauthprovider" hreflang="en"><link data-rh="true" rel="alternate" href="https://findingsov.github.io/cashu-mint-docs/docs/Security/setupauthprovider" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Set Up Auth and Auth Provider","item":"https://findingsov.github.io/cashu-mint-docs/docs/Security/setupauthprovider"}]}</script><link rel="alternate" type="application/rss+xml" href="/cashu-mint-docs/blog/rss.xml" title="Cashu Mint Docs Best Practices RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cashu-mint-docs/blog/atom.xml" title="Cashu Mint Docs Best Practices Atom Feed"><link rel="stylesheet" href="/cashu-mint-docs/assets/css/styles.66c3a53b.css">
<script src="/cashu-mint-docs/assets/js/runtime~main.5682a246.js" defer="defer"></script>
<script src="/cashu-mint-docs/assets/js/main.aa1fc295.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#18181b;color:#fafafa" role="banner"><div class="content_knG7 announcementBarContent_xLdY">We’re actively building these docs—check back for updates.</div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cashu-mint-docs/"><div class="navbar__logo"><img src="/cashu-mint-docs/img/Cashume.png" alt="Cashu-Mint Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cashu-mint-docs/img/Cashume.png" alt="Cashu-Mint Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cashu Mint Best Practices Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cashu-mint-docs/docs/Introduction/getting_started">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/findingsov/cashu-mint-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cashu-mint-docs/docs/Introduction/getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cashu-mint-docs/docs/Lightning/lightning">Lightning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cashu-mint-docs/docs/Setup and Deployment/configuremint">Setup and Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cashu-mint-docs/docs/Backups/backingup">Backups</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/cashu-mint-docs/docs/Security/limitingaccessmint">Security</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cashu-mint-docs/docs/Security/limitingaccessmint">Limit Access to your Mint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cashu-mint-docs/docs/Security/protectingserver">Protecting Your Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cashu-mint-docs/docs/Security/monitoring">Monitoring Your Mint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cashu-mint-docs/docs/Security/setupauthprovider">Set Up Auth and Auth Provider</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cashu-mint-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Security</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Set Up Auth and Auth Provider</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Set Up Auth and Auth Provider</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-mint-for-authentication">Configure Mint for Authentication<a href="#configure-mint-for-authentication" class="hash-link" aria-label="Direct link to Configure Mint for Authentication" title="Direct link to Configure Mint for Authentication">​</a></h2>
<p>Make sure your mint configuration is set up for authentication. In your .env or config.toml file, you need to make sure the URL for discovery is set correctly for your realm name.</p>
<p>cdk config.toml</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># [auth]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># openid_discovery = &quot;http://127.0.0.1:8080/realms/&lt;realm name, e.g cdk&gt;/.well-known/openid-configuration&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># openid_client_id = &quot;cashu-client&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># mint_max_bat=50</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_mint=true</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_melt=true</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_swap=true</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_check_mint_quote=true</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_check_melt_quote=true</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># enabled_restore=true</span><br></span></code></pre></div></div>
<p>nutshell .env file</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># Turn on authentication</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># MINT_REQUIRE_AUTH=TRUE</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># OpenID Connect discovery URL of the authentication provider</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># MINT_AUTH_OICD_DISCOVERY_URL=http://localhost:8080/realms/&lt;realm name, e.g nutshell&gt;/.well-known/openid-configuration</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># MINT_AUTH_OICD_CLIENT_ID=cashu-client</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># Number of authentication attempts allowed per minute per user</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># MINT_AUTH_RATE_LIMIT_PER_MINUTE=5</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># Maximum number of blind auth tokens per authentication request</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># MINT_AUTH_MAX_BLIND_TOKENS=100</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auth-provider-setup">Auth Provider Setup<a href="#auth-provider-setup" class="hash-link" aria-label="Direct link to Auth Provider Setup" title="Direct link to Auth Provider Setup">​</a></h2>
<p>The best practice is to set up your auth provider on a separate server (or even cluster of servers).</p>
<p>The OIDC service must be setup as follows:</p>
<ul>
<li>No client secret: The OIDC service MUST NOT use a client secret.</li>
<li>Authorization code flow: The OIDC service MUST enable the authorization code flow with PKCE for public clients, so that an authorization code can be exchanged for an access token and a refresh token.</li>
<li>Signature algorithm: The OIDC service MUST support at least one of the two asymmetric JWS signature algorithms for access token and ID token signatures: ES256 and RS256.</li>
<li>Wallet redirect URLs: To support the OpenID Connect Authorization Code flow, the OIDC service MUST allow redirect URLs that correspond to the wallets it wants to support. You can find a list of common redirect URLs for well-known Cashu wallets here.</li>
<li>Localhost redirect URL: The OIDC service MUST also allow redirects to the URL <a href="http://localhost:33388/callback" target="_blank" rel="noopener noreferrer">http://localhost:33388/callback</a>.</li>
<li>Authentication flows: Although, strictly speaking, this NUT does not restrict the OpenID Connect grant types that can be used to obtain a CAT, it is recommended to enable at least the authorization_code (Authorization Code) flow and the urn:ietf:params:oauth:grant-type<!-- -->:device_code<!-- --> (Device Code) flow in the grant_types_supported field of the openid_discovery configuration. The password (Resource Owner Password Credentials, ROPC) flow SHOULD NOT be used as it requires handling the user&#x27;s credentials in the wallet application.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="keycloak-setup">Keycloak Setup<a href="#keycloak-setup" class="hash-link" aria-label="Direct link to Keycloak Setup" title="Direct link to Keycloak Setup">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-docker">Set Up Docker<a href="#set-up-docker" class="hash-link" aria-label="Direct link to Set Up Docker" title="Direct link to Set Up Docker">​</a></h3>
<ol>
<li>
<p>Make sure you have docker and docker-compose installed.</p>
</li>
<li>
<p>Locate the docker-compose.yml file and .env file in your keycloak folder.</p>
</li>
<li>
<p>Set up .env file with passwords, etc.</p>
</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">POSTGRES_DB=&quot;keycloakdb&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">POSTGRES_USER=&quot;keycloakadmin&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">POSTGRES_PASSWORD=****</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KEYCLOAK_ADMIN=&quot;admin&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KEYCLOAK_ADMIN_PASSWORD=*****</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_HOSTNAME=&quot;hostname&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">#KC_HOSTNAME=localhost</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_HOSTNAME_PORT=8080</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_HOSTNAME_URL=&quot;&lt;url&gt;&quot;</span><br></span></code></pre></div></div>
<ol start="3">
<li>Edit the provided docker-compose.yml for any additional setup you may need (add vars to .env file), such as:</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_HOSTNAME_ADMIN_URL=&quot;&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_HOSTNAME_URL=&quot;&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_CORS: &quot;true&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_CORS_ORIGINS: &quot;*&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">KC_CORS_ALLOW_METHODS: &quot;GET,POST,OPTIONS,PUT,DELETE&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-and-stop-keycloak">Start and Stop Keycloak<a href="#start-and-stop-keycloak" class="hash-link" aria-label="Direct link to Start and Stop Keycloak" title="Direct link to Start and Stop Keycloak">​</a></h3>
<p>To start, from the keycloak directory:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">sudo docker-compose up -d</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">docker ps</span><br></span></code></pre></div></div>
<p>To stop:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">sudo docker-compose down</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="realm-and-client-setup">Realm and Client Setup<a href="#realm-and-client-setup" class="hash-link" aria-label="Direct link to Realm and Client Setup" title="Direct link to Realm and Client Setup">​</a></h3>
<p>Access the Keycloak Admin Console at the Keycloak admin URL:</p>
<ol>
<li>Click the Keycloak drop-down in upper left, and Create Realm for the mint. e.g., nutshell, cdk</li>
<li>Select Clients and set<!-- -->
<ul>
<li>Client type = OpenID Connect</li>
<li>Client ID = cashu-client</li>
</ul>
</li>
<li>In the Client settings, configure:</li>
</ol>
<ul>
<li>Client Authentication = OFF
(This configures the type as public access and automatically ensures no client secret is used).</li>
<li>Standard Flow Enabled = ON
(This is the authorization code flow).</li>
<li>Implicit Flow Enabled = OFF
(Unless you explicitly need the Implicit Flow).</li>
<li>Direct Access Grants Enabled = OFF
(Unless you want users to authenticate via resource owner password credentials).</li>
<li>Service Accounts Enabled = OFF
(This is for confidential clients needing a service account).</li>
<li>Device Authentication Grant : ON</li>
</ul>
<ol start="4">
<li>For Web-based clients, provide proper root, home, and redirect URLs. Set a redirect URL of <a href="http://localhost:33388/callback" target="_blank" rel="noopener noreferrer">http://localhost:33388/callback</a>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-setup">User Setup<a href="#user-setup" class="hash-link" aria-label="Direct link to User Setup" title="Direct link to User Setup">​</a></h3>
<p>Define users and their initial passwords.</p>
<ol>
<li>Select the Users tab and Create User</li>
<li>After User creatiion, select the Credentials tab and Set password.  Choose Temporary=On.</li>
</ol></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cashu-mint-docs/docs/Security/monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Monitoring Your Mint</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configure-mint-for-authentication" class="table-of-contents__link toc-highlight">Configure Mint for Authentication</a></li><li><a href="#auth-provider-setup" class="table-of-contents__link toc-highlight">Auth Provider Setup</a></li><li><a href="#keycloak-setup" class="table-of-contents__link toc-highlight">Keycloak Setup</a><ul><li><a href="#set-up-docker" class="table-of-contents__link toc-highlight">Set Up Docker</a></li><li><a href="#start-and-stop-keycloak" class="table-of-contents__link toc-highlight">Start and Stop Keycloak</a></li><li><a href="#realm-and-client-setup" class="table-of-contents__link toc-highlight">Realm and Client Setup</a></li><li><a href="#user-setup" class="table-of-contents__link toc-highlight">User Setup</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>